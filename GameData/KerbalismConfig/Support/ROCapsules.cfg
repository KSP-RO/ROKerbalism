// ROCapsules support patches
// by Gordon Dry
// (not really, just copied the TAC-LS values 1:1 - so credits go to Frizzank and Pap)

@PART[ROC-MercuryCM|ROC-MercuryCMBDB]:NEEDS[RealFuels,ROCapsules]:AFTER[ROCapsules]
{
	@description ^= :$: Supports a crew of one for up to maximum 35 hours of active operations but it will require you to change the resources.

	@MODULE[ModuleFuelTanks]
	{
		TANK
		{
			name = Food
			amount = 0
			maxAmount = 8.5302
		}

		TANK
		{
			name = Water
			amount = 0
			maxAmount = 5.6448
		}

		TANK
		{
			name = Oxygen
			amount = 0
			maxAmount = 863.1
		}

		TANK
		{
			name = LithiumHydroxide
			amount = 1.05
			maxAmount = 1.05
		}

		TANK
		{
			name = WasteWater
			amount = 0
			maxAmount = 7.1820
		}

		TANK
		{
			name = Waste
			amount = 0
			maxAmount = 5.7305
		}
	}
}

@PART[ROC-GeminiCM|ROC-GeminiCMBDB]:NEEDS[RealFuels,ROCapsules]:AFTER[ROCapsules]
{
	@description ^= :$: Supports a crew of two for up to maximum 14 days of active operations but it will require fuel cells.

	@MODULE[ModuleFuelTanks]
	{
		TANK
		{
			name = Food
			amount = 164
			maxAmount = 164	// 14 days
		}

		TANK
		{
			name = Water
			amount = 8
			maxAmount = 8	// 1 day
		}

		TANK
		{
			name = Oxygen
			amount = 1184
			maxAmount = 1184	// 1 day
		}

		TANK
		{
			name = Waste
			amount = 0
			maxAmount = 111	// 14 days
		}

		TANK
		{
			name = WasteWater
			amount = 0
			maxAmount = 138	// 14 days
		}

		TANK
		{
			name = LithiumHydroxide
			amount = 29
			maxAmount = 29	// 14 days
		}
	}
}

@PART[ROC-DynaBody]:NEEDS[RealFuels,ROCapsules]:AFTER[ROCapsules]
{
	@description ^= :$: Supports a crew of one for up to maximum 14 days of active operations but it will require fuel cells.

	@MODULE[ModuleFuelTanks]
	{
		TANK
		{
			name = Food
			amount = 8.5302
			maxAmount = 8.5302
		}

		TANK
		{
			name = Water
			amount = 5.6448
			maxAmount = 5.6448
		}

		TANK
		{
			name = Oxygen
			amount = 863.1
			maxAmount = 863.1
		}

		TANK
		{
			name = Nitrogen
			amount = 863.1
			maxAmount = 863.1
		}

		TANK
		{
			name = LithiumHydroxide
			amount = 1.05
			maxAmount = 1.05
		}

		TANK
		{
			name = WasteWater
			amount = 0
			maxAmount = 7.1820
		}

		TANK
		{
			name = Waste
			amount = 0
			maxAmount = 5.7305
		}
	}
}

@PART[ROC-DynaCabin]:NEEDS[RealFuels,ROCapsules]:AFTER[ROCapsules]
{
	@description ^= :$: Supports a crew of 2 for up to maximum 14 days of active operations.

	@MODULE[ModuleFuelTanks]
	{
		TANK
		{
			name = Food
			amount = 164
			maxAmount = 164	// 14 days
		}

		TANK
		{
			name = Water
			amount = 8
			maxAmount = 8	// 1 day
		}

		TANK
		{
			name = Oxygen
			amount = 1184
			maxAmount = 1184	// 1 day
		}

		TANK
		{
			name = Nitrogen
			amount = 5000
			maxAmount = 5000	//Guess
		}

		TANK
		{
			name = Waste
			amount = 0
			maxAmount = 111	// 14 days
		}

		TANK
		{
			name = WasteWater
			amount = 0
			maxAmount = 138	// 14 days
		}

		TANK
		{
			name = LithiumHydroxide
			amount = 29
			maxAmount = 29	// 14 days
		}
	}
}

@PART[ROC-ApolloCM]:NEEDS[RealFuels,ROCapsules]:AFTER[ROCapsules]
{
	@description ^= :$: Supports a crew of three for up to 14 days of active operations.

	@mass -= 0.15

	@MODULE[ModuleFuelTanks]
	{
		@volume += 380

		TANK
		{
			name = Food
			amount = 245.7
			maxAmount = 245.7
		}

		//	One water storage tank with a capacity of ~16 kg.
		TANK
		{
			name = Water
			amount = 16
			maxAmount = 16
		}

		TANK
		{
			name = Oxygen
			amount = 1755.5
			maxAmount = 1755.5
		}

		TANK
		{
			name = LithiumHydroxide
			amount = 43.2
			maxAmount = 43.2
		}

		//	One waste water tank with a capacity of ~25 kg.
		TANK
		{
			name = WasteWater
			amount = 0
			maxAmount = 25
		}

		TANK
		{
			name = Waste
			amount = 0
			maxAmount = 22.4
		}
	}
}

@PART[ROC-ApolloCMBlockIII]:NEEDS[RealFuels,ROCapsules]:AFTER[ROCapsules]
{

	@mass -= 0.15
	
	@MODULE[ModuleFuelTanks]
	{
		@volume += 280

		TANK
		{
			name = Food
			amount = 58.5
			maxAmount = 58.5
		}
		
		TANK
		{
			name = Water
			amount = 38.8
			maxAmount = 38.8
		}

		TANK
		{
			name = Oxygen
			amount = 6214.32
			maxAmount = 6214.32
		}

		TANK
		{
			name = LithiumHydroxide
			amount = 10.815
			maxAmount = 10.815
		}

		//	One waste water tank with a capacity of ~25 kg.
		TANK
		{
			name = WasteWater
			amount = 0
			maxAmount = 25
		}

		TANK
		{
			name = Waste
			amount = 0
			maxAmount = 22.4
		}
	}
}

@PART[ROC-ApolloMissionModule4]:NEEDS[ROCapsules,FeatureScience]:AFTER[ROCapsules]
{
	MODULE
	{
		name = Laboratory
		ec_rate = 0.07
		analysis_rate = 0.0000025
		researcher = Scientist
	}
}

@PART[ROC-LEMAscent]:NEEDS[RealFuels,ROCapsules]:AFTER[ROCapsules]
{
	@description ^= :$: Supports a crew of two for up to 3 days of active operations.

	@mass -= 0.04

	@MODULE[ModuleFuelTanks]
	{
		@volume += 165

		TANK
		{
			name = Food
			amount = 23.4
			maxAmount = 35.1
		}

		//	Two water tanks with a capacity of ~20 kg each.

		TANK
		{
			name = Water
			amount = 40
			maxAmount = 40
		}

		//	Two oxygen tanks with a capacity of ~1.1 kg each.

		TANK
		{
			name = Oxygen
			amount = 1563.4
			maxAmount = 1563.4
		}

		TANK
		{
			name = LithiumHydroxide
			amount = 4.1
			maxAmount = 6.2
		}

		TANK
		{
			name = Waste
			amount = 0
			maxAmount = 3.2
		}

		TANK
		{
			name = WasteWater
			amount = 0
			maxAmount = 29.3
		}
	}
}

@PART[ROC-SoyuzMSCapsule]:NEEDS[RealFuels,ROCapsules]:AFTER[ROCapsules]
{
	@description ^= :$: Supports a crew of 3 for up to 48 hours.

	@mass -= 0.009

	@MODULE[ModuleFuelTanks]
	{
		@volume += 80

		//	Food (6 hours).
		TANK
		{
			name = Food
			amount = 4.4
			maxAmount = 4.4
		}
		//	Water (6 hours).
		TANK
		{
			name = Water
			amount = 2.9
			maxAmount = 2.9
		}
		//	Oxygen (48 hours).
		TANK
		{
			name = Oxygen
			amount = 3551.0
			maxAmount = 3551.0
		}
		//	Solid waste (capacity for 6 hours).
		TANK
		{
			name = Waste
			amount = 0
			maxAmount = 0.4
		}
		//	Liquid waste (capacity for 6 hours).
		TANK
		{
			name = WasteWater
			amount = 0
			maxAmount = 3.7
		}
	}
}

@PART[ROC-SoyuzMSOM]:NEEDS[RealFuels,ROCapsules]:AFTER[ROCapsules]
{
	@description ^= :$: Provides support resources for a crew of 3 for up to 30 days.

	@mass -= 0.315

	MODULE
	{
		name = ModuleFuelTanks
		type = ServiceModule
		volume = 1930
		basemass = -1

		//	Food (capacity for 720 hours).
		TANK
		{
			name = Food
			amount = 263.5
			maxAmount = 526.5
		}
		//	Water (capacity for 720 hours).
		TANK
		{
			name = Water
			amount = 174.2
			maxAmount = 348.4
		}
		//	Oxygen (capacity for 720 hours).
		TANK
		{
			name = Oxygen
			amount = 26632.8
			maxAmount = 53265.6
		}
		//	Solid waste (capacity for 720 hours).
		TANK
		{
			name = Waste
			amount = 0
			maxAmount = 47.9
		}
		//	Liquid waste (capacity for 720 hours).
		TANK
		{
			name = WasteWater
			amount = 0
			maxAmount = 443.3
		}
		//  CO2 scrubber canisters (capacity for 720 hours).
		TANK
		{
			name = PotassiumSuperoxide
			amount = 16.7
			maxAmount = 66.6
		}
	}
}

@PART[ROC-LEMDescent]:NEEDS[RealFuels,ROCapsules]:AFTER[ROCapsules]
{
	@mass -= 0.194

	@MODULE[ModuleFuelTanks]
	{
		@volume += 310

		//	Two water tanks with a capacity of ~75 kg each (second tank for J missions).

		TANK
		{
			name = Water
			amount = 0
			maxAmount = 150
		}

		//	Two oxygen tanks with a capacity of ~22 kg each (second tank for J missions).

		TANK
		{
			name = Oxygen
			amount = 15441.4
			maxAmount = 30882.9
		}
	}
}

@PART[ROC-CSTCM]:NEEDS[RealFuels,ROCapsules]:AFTER[ROCapsules]
{
	@description ^= :$: Supports a crew of 7 for 2 days.:

	@mass -= 0.07
	
	@MODULE[ModuleFuelTanks]
	{
		@volume = 460

		TANK
		{
			name = Food
			amount = 102.37
			maxAmount = 102.37
		}

		TANK
		{
			name = Water
			amount = 27.1
			maxAmount = 27.1
		}

		TANK
		{
			name = Oxygen
			amount = 4145
			maxAmount = 4145
		}

		TANK
		{
			name = Nitrogen		//No idea of actual size, assuming same 1:3 ratio Nitrogen:Oxygen Orion has
			amount = 1381
			maxAmount = 1381
		}

		TANK
		{
			name = Waste
			amount = 0
			maxAmount = 9.32
		}

		TANK
		{
			name = WasteWater
			amount = 0
			maxAmount = 34.47
		}
	}
}

@PART[ROC-Dragon2CM]:NEEDS[RealFuels,ROCapsules]:AFTER[ROCapsules]
{
	@description ^= :$: Supports a crew of 6 for 3 days.:

	@MODULE[ModuleFuelTanks]
	{
		@volume += 371.36

		TANK
		{
			name = Food
			amount = 105.3
			maxAmount = 105.3
		}

		TANK
		{
			name = Water
			amount = 57.54
			maxAmount = 57.54
		}

		TANK
		{
			name = Oxygen
			amount = 10659.58
			maxAmount = 10659.58
		}

		TANK
		{
			name = Nitrogen
			amount = 1500
			maxAmount = 1500
		}

		TANK
		{
			name = Waste
			amount = 0
			maxAmount = 9.58
		}

		TANK
		{
			name = WasteWater
			amount = 0
			maxAmount = 88.64
		}
	}
}

@PART[ROC-Dragon2CMLunar]:NEEDS[RealFuels,ROCapsules]:AFTER[ROCapsules]
{
	@description ^= :$: Supports a crew of 3 for 10 days.:

	@MODULE[ModuleFuelTanks]
	{
		@volume += 580.91

		TANK
		{
			name = Food
			amount = 175.5
			maxAmount = 175.5
		}

		TANK
		{
			name = Water
			amount = 95.9
			maxAmount = 95.9
		}

		TANK
		{
			name = Oxygen
			amount = 17765.96
			maxAmount = 17765.96
		}

		TANK
		{
			name = Nitrogen
			amount = 1500
			maxAmount = 1500
		}

		TANK
		{
			name = Waste
			amount = 0
			maxAmount = 15.96
		}

		TANK
		{
			name = WasteWater
			amount = 0
			maxAmount = 147.72
		}
	}
}

@PART[ROC-DragonCM|ROC-Dragon2CargoCM]:NEEDS[RealFuels,ROCapsules]:AFTER[ROCapsules]
{
	@description ^= :$: Cargo to Support a crew of 3 for 70 days.:

	@MODULE[ModuleFuelTanks]
	{
		@volume += 3724.36

		TANK
		{
			name = Food
			amount = 0
			maxAmount = 1228.5
		}

		TANK
		{
			name = Water
			amount = 0
			maxAmount = 671.29
		}

		TANK
		{
			name = Oxygen
			amount = 0
			maxAmount = 124361.71
		}

		TANK
		{
			name = Nitrogen
			amount = 0
			maxAmount = 1500
		}

		TANK
		{
			name = Waste
			amount = 0
			maxAmount = 111.72
		}

		TANK
		{
			name = WasteWater
			amount = 0
			maxAmount = 1034.04
		}
	}
}

@PART[ROC-DragonXL]:NEEDS[RealFuels,ROCapsules]:AFTER[ROCapsules]
{
	@description ^= :$: Cargo to Support a crew of 3 for 106 days.:

	@MODULE[ModuleFuelTanks]
	{
		@volume += 5610.28

		TANK
		{
			name = Food
			amount = 0
			maxAmount = 1860.3
		}

		TANK
		{
			name = Water
			amount = 0
			maxAmount = 1016.52
		}

		TANK
		{
			name = Oxygen
			amount = 0
			maxAmount = 188319.15

		}

		TANK
		{
			name = Nitrogen
			amount = 0
			maxAmount = 1500
		}

		TANK
		{
			name = Waste
			amount = 0
			maxAmount = 169.18
		}

		TANK
		{
			name = WasteWater
			amount = 0
			maxAmount = 1565.84
		}
	}
}

@PART[ROC-StarshipLunarCM]:NEEDS[RealFuels,ROCapsules]:AFTER[ROCapsules]
{
	@description ^= :$: Supports a crew of 8 for 360 days.:

	@MODULE[ModuleFuelTanks]
	{
		@volume += 50469.2

		TANK
		{
			name = Food
			amount = 16848
			maxAmount = 16848
		}

		TANK
		{
			name = Water
			amount = 9206.21
			maxAmount = 9206.21
		}

		TANK
		{
			name = Oxygen
			amount = 1705531.92
			maxAmount = 1705531.92
		}

		TANK
		{
			name = Nitrogen
			amount = 15000
			maxAmount = 15000
		}

		TANK
		{
			name = Waste
			amount = 0
			maxAmount = 1532.16
		}

		TANK
		{
			name = WasteWater
			amount = 0
			maxAmount = 14181.12
		}
	}
}

// habitats
@PART[ROC-MercuryCM|ROC-MercuryCMBDB]:NEEDS[ROCapsules,FeatureHabitat]:AFTER[zzzKerbalism]
{
	@MODULE[Habitat]
	{
		%volume = 1.56
		%surface = 3.85		//guesstimate
		%max_pressure = 0.34
	}
}
@PART[ROC-VostokCapsule|ROC-VoskhodCapsule]:NEEDS[ROCapsules,FeatureHabitat]:AFTER[zzzKerbalism]
{
	@MODULE[Habitat]
	{
		%volume = 2.5
	}
}
@PART[ROC-VoskhodAirlock]:NEEDS[ROCapsules,FeatureHabitat]:AFTER[zzzKerbalism]
{
	@MODULE[Habitat]
	{
		%inflate = Inflate
		%state = disabled
		%animBackwards = False
		%volume = 1.1
		%surface = 5.83
	}
}
@PART[ROC-GeminiCM|ROC-GeminiCMBDB]:NEEDS[ROCapsules,FeatureHabitat]:AFTER[zzzKerbalism]
{
	@MODULE[Habitat]
	{
		%volume = 2.26
		%surface = 5.89		//guesstimate
		%max_pressure = 0.35
	}
}
@PART[ROC-BigGeminiCabinBDB]:NEEDS[ROCapsules,FeatureHabitat]:AFTER[zzzKerbalism]
{
	@MODULE[Habitat]
	{
		%volume = 16.5
		%surface = 26.4		//guesstimate
		%max_pressure = 0.35
	}
}
@PART[ROC-BigGeminiSM]:NEEDS[ROCapsules,FeatureHabitat]:AFTER[zzzKerbalism]
{
	@MODULE[Habitat]
	{
		%volume = 10
		%surface = 66		//guesstimate
		%max_pressure = 0.35
	}
}
@PART[ROC-DynaBody]:NEEDS[ROCapsules,FeatureHabitat]:AFTER[zzzKerbalism]
{
	@MODULE[Habitat]
	{
		%volume = 2
		%surface = 10		//guesstimate
		%max_pressure = 0.55
	}
}
@PART[ROC-DynaCabin]:NEEDS[ROCapsules,FeatureHabitat]:AFTER[zzzKerbalism]
{
	@MODULE[Habitat]
	{
		%volume = 3.50
		%surface = 5.89		//guesstimate
		%max_pressure = 0.55
	}
}
@PART[ROC-LEMAscent]:NEEDS[ROCapsules,FeatureHabitat]:AFTER[zzzKerbalism]
{
	@MODULE[Habitat]
	{
		%volume = 4.5
		%surface = 18.1		//guesstimate
		%max_pressure = 0.35
	}
}
@PART[ROC-ApolloCM]:NEEDS[ROCapsules,FeatureHabitat]:AFTER[zzzKerbalism]
{
	@MODULE[Habitat]
	{	
		%volume = 5.9
		%surface = 15.71		//guesstimate
		%max_pressure = 0.35
	}
}
@PART[ROC-ApolloCMBlockIII]:NEEDS[ROCapsules,FeatureHabitat]:AFTER[zzzKerbalism]
{
	@MODULE[Habitat]
	{
		%volume = 6.2		//override default values to account for extra space with removed cargo racks
		%surface = 15.71		//guesstimate
	}
}
@PART[ROC-ApolloMissionModule]:NEEDS[ROCapsules,FeatureHabitat]:AFTER[zzzKerbalism]
{
	@MODULE[Habitat]
	{
		%volume = 16.8		//According to ETS wiki
		%surface = 26.4		//guesstimate
	}
	MODULE
	{
		name = ProcessController
		resource = _PressureControlOxygen
		title = O2 Pressure Controller
		capacity = 5
		running = true
	}
}
@PART[ROC-ApolloMissionModule4]:NEEDS[ROCapsules,FeatureHabitat]:AFTER[zzzKerbalism]
{
	@MODULE[Habitat]
	{
		%volume = 16.8		//According to ETS wiki
		%surface = 33.0		//guesstimate
	}
	MODULE
	{
		name = ProcessController
		resource = _PressureControlOxygen
		title = O2 Pressure Controller
		capacity = 10
		running = true
	}
}
@PART[ROC-SoyuzMSCapsule]:NEEDS[FeatureHabitat]:AFTER[zzzKerbalism]
{
	@MODULE[Habitat]
	{
		%volume = 4
		surface = 12		//guesstimate
	}
}
@PART[ROC-OrionCM]:NEEDS[ROCapsules,FeatureHabitat]:AFTER[zzzKerbalism]
{
	@MODULE[Habitat]
	{
		%volume = 8.95
		%surface = 35
	}
}
@PART[ROC-CSTCM]:NEEDS[ROCapsules,FeatureHabitat]:AFTER[zzzKerbalism]
{
	@MODULE[Habitat]
	{
		%volume = 11
		%surface = 35		//guess, very similar dimensions to Orion
	}
}
@PART[ROC-Dragon2CM|ROC-Dragon2CMLunar]:NEEDS[ROCapsules,FeatureHabitat]:AFTER[zzzKerbalism]
{
	@MODULE[Habitat]
	{
		%volume = 9.3
		%surface = 35		//guesstimate
	}
}
@PART[ROC-StarshipLunarCM]:NEEDS[ROCapsules,FeatureHabitat]:AFTER[zzzKerbalism]
{
	@MODULE[Habitat]
	{
		%volume = 200		//guesstimate
		%surface = 50		//guesstimate
	}
}

// ============================================================================
// SCIENCE
// ============================================================================
// crew experiments

@PART[ROC-MercuryCM|ROC-MercuryCMBDB|ROC-VostokCapsule]:NEEDS[ROCapsules,FeatureScience,RP-0]:BEFORE[RP-0-Kerbalism] { %capsuleTier = Basic }
@PART[ROC-GeminiCM|ROC-GeminiCMBDB|ROC-VoskhodCapsule|ROC-DynaBody]:NEEDS[ROCapsules,FeatureScience,RP-0]:BEFORE[RP-0-Kerbalism]{ %capsuleTier = SecondGen }
@PART[ROC-ApolloCM|ROC-ApolloCMBlockIII|ROC-SoyuzMSCapsule|ROC-OrionCM|ROC-Dragon2CM|ROC-Dragon2CMLunar|ROC-StarshipLunarCM]:NEEDS[ROCapsules,FeatureScience,RP-0]:BEFORE[RP-0-Kerbalism] { %capsuleTier = Mature }

// crew laboratory
@PART[ROC-StarshipLunarCM]:NEEDS[ROCapsules,FeatureScience,RP-0]:BEFORE[RP-0-Kerbalism]
{
	MODULE
	{
		name = Laboratory
		ec_rate = 0.1
		analysis_rate = 0.000005
		@ec_rate *= #$/CrewCapacity$
		@analysis_rate *= #$/CrewCapacity$
		researcher = Scientist
	}
}

// hard drives
@PART[ROC-MercuryCM|ROC-MercuryCMBDB|ROC-VostokCapsule|ROC-VoskhodCapsule]:NEEDS[ROCapsules,FeatureScience,RP-0]:FOR[RP-0-Kerbalism]
{
	!MODULE[HardDrive] {}
	MODULE
	{
		name = HardDrive
		title = Data Storage
		dataCapacity = #$@KERBALISM_HDD_SIZES/mercury/data$
		sampleCapacity = #$@KERBALISM_HDD_SIZES/mercury/samples$
	}
}
@PART[ROC-GeminiCM|ROC-GeminiCMBDB|ROC-DynaBody]:NEEDS[ROCapsules,FeatureScience,RP-0]:FOR[RP-0-Kerbalism]
{
	!MODULE[HardDrive] {}
	MODULE
	{
		name = HardDrive
		title = Data Storage
		dataCapacity = #$@KERBALISM_HDD_SIZES/gemini/data$
		sampleCapacity = #$@KERBALISM_HDD_SIZES/gemini/samples$
	}
}
@PART[ROC-ApolloCMBlockIII|ROC-ApolloCM|ROC-LEMAscent]:NEEDS[ROCapsules,FeatureScience,RP-0]:FOR[RP-0-Kerbalism]
{
	!MODULE[HardDrive] {}
	MODULE
	{
		name = HardDrive
		title = Data Storage
		dataCapacity = #$@KERBALISM_HDD_SIZES/apollo/data$
		sampleCapacity = #$@KERBALISM_HDD_SIZES/apollo/samples$
	}
}
@PART[ROC-OrionCM|ROC-SoyuzMSCapsule]:NEEDS[ROCapsules,FeatureScience,RP-0]:FOR[RP-0-Kerbalism]
{
	!MODULE[HardDrive] {}
	MODULE
	{
		name = HardDrive
		title = Data Storage
		dataCapacity = #$@KERBALISM_HDD_SIZES/orion/data$
		sampleCapacity = #$@KERBALISM_HDD_SIZES/orion/samples$
	}
}
@PART[ROC-CSTCM|ROC-DragonCM|ROC-Dragon2CargoCM|ROC-Dragon2CM|ROC-Dragon2CMLunar|ROC-DragonXL|ROC-StarshipLunarCM]:NEEDS[ROCapsules,FeatureScience,RP-0]:FOR[RP-0-Kerbalism]
{
	!MODULE[HardDrive] {}
	MODULE
	{
		name = HardDrive
		title = Data Storage
		dataCapacity = #$@KERBALISM_HDD_SIZES/dragon_cst/data$
		sampleCapacity = #$@KERBALISM_HDD_SIZES/dragon_cst/samples$
	}
}
