// ============================================================================
// Add tag to parts, currently only almaz/salyut don't have orbital laboratories attached to them
// ============================================================================
@PART[salyut6|salyut7]:NEEDS[FeatureScience,RP-0]:BEFORE[RP-0-Kerbalism]
{
	%stationTier = SecondGen
}

// ============================================================================
// Liquids in Microgravity
// ============================================================================
@PART[*]:HAS[#stationTier[SecondGen]]:NEEDS[FeatureScience]:FOR[RP-0-Kerbalism]
{
	MODULE
	{
		name = Experiment
		experiment_id = RP0-StationScience2

		ec_rate = #$@KERBALISM_CREW_EXPERIMENTS/RP0-StationScience2/ECCost$
		data_rate = #$@KERBALISM_CREW_EXPERIMENTS/RP0-StationScience2/size$
		@data_rate /= #$@KERBALISM_CREW_EXPERIMENTS/RP0-StationScience2/duration$
		requires = #$@KERBALISM_CREW_EXPERIMENTS/RP0-StationScience2/requirements$
		resources = #$@KERBALISM_CREW_EXPERIMENTS/RP0-StationScience2/ResourceRates$
        	%sample_amount = 1
        	%sample_amount /= 2
		crew_operate = Scientist
		hide_when_unavailable = True
    	}
}
@EXPERIMENT_DEFINITION:HAS[#id[RP0-StationScience2]]:NEEDS[FeatureScience]:FOR[RP-0-Kerbalism]
{
	@baseValue = #$@KERBALISM_CREW_EXPERIMENTS/RP0-StationScience2/value$
	@dataScale = #$@KERBALISM_CREW_EXPERIMENTS/RP0-StationScience2/size$
	@dataScale /= #$baseValue$
	KERBALISM_EXPERIMENT
  	{
   		// sample mass in tons. if undefined or 0, the experiment produce a file
    	SampleMass = #$@KERBALISM_CREW_EXPERIMENTS/RP0-StationScience1/SampleMass$
	    // Body restrictions, multiple lines allowed (just don't use confictiong combinations).
	    BodyAllowed = HomeBody
		IncludeExperiment = #$@KERBALISM_CREW_EXPERIMENTS/RP0-StationScience1/IncludeExperiment$
 	}
}

@PART[*]:HAS[#stationTier[SecondGen]]:NEEDS[FeatureScience]:AFTER[RP-0-Kerbalism]{
	MODULE
	{
		name = Configure
		title = Crew Science
		slots = 2
		SETUP
		{
			name = None 1
			desc = Empty slot 1
		}
		SETUP
		{
			name = None 2
			desc = Empty slot 2
		}
		SETUP
		{
			name = Station Science 1
			desc = Now that you have the ability to keep people in space for a while you can now run longer term experiments that require more human oversight. <b> This experiment consumes research payload at a rate of 1/hr </b>
			mass = 0.5
			tech = spaceStationDevelopment
			
			MODULE
			{
			  type = Experiment
			  id_field = experiment_id
			  id_value = RP0-StationScience1
			}
		}
		SETUP
		{
			name = Station Science 2
			desc = Now that crewed space travel seems almost regular you can now start taking other peoples experiments up there <b> This experiment consumes research payload at a rate of 1/hr and comes with a generator to convert research payload into processed payload to perform crewed science contracts</b>
			mass = 0.5
			tech = earlySpaceStations
			
			MODULE
			{
			  type = Experiment
			  id_field = experiment_id
			  id_value = RP0-StationScience2
			}
		}
	}
}



// delete the tag
@PART[*]:HAS[#stationTier[SecondGen]]:LAST[RP-0-Kerbalism]
{
  !stationTier = delete
}
