// ============================================================================
// Add tag to parts, currently only almaz/salyut dont have orbital laboratories attached to them
// ============================================================================
@PART[almaz3-5|salyut1-4]:NEEDS[FeatureScience,RP-0]:BEFORE[RP-0-Kerbalism]
{
	%stationTier = Early
}

// ============================================================================
// Liquids in Microgravity
// ============================================================================
@PART[*]:HAS[#stationTier[Early]]:NEEDS[FeatureScience]:FOR[RP-0-Kerbalism]
{
	MODULE
	{
		name = Experiment
		experiment_id = RP0-StationScience1

		ec_rate = #$@KERBALISM_CREW_EXPERIMENTS/RP0-StationScience1/ECCost$
		data_rate = #$@KERBALISM_CREW_EXPERIMENTS/RP0-StationScience1/size$
		@data_rate /= #$@KERBALISM_CREW_EXPERIMENTS/RP0-StationScience1/duration$
		requires = #$@KERBALISM_CREW_EXPERIMENTS/RP0-StationScience1/requirements$
		resources = #$@KERBALISM_CREW_EXPERIMENTS/RP0-StationScience1/ResourceRates$
        	%sample_amount = 1
		@sample_amount /= 8 // max crew capacity of skylab
		@sample_amount *= #$/CrewCapacity$ // should set it up so you need 1 skylab launch and multiple salyut launches
		crew_operate = Scientist
		hide_when_unavailable = True
    	}
}
@EXPERIMENT_DEFINITION:HAS[#id[RP0-StationScience1]]:NEEDS[FeatureScience]:FOR[RP-0-Kerbalism]
{
	@baseValue = #$@KERBALISM_CREW_EXPERIMENTS/RP0-StationScience1/value$
	@dataScale = #$@KERBALISM_CREW_EXPERIMENTS/RP0-StationScience1/size$
	@dataScale /= #$baseValue$
	KERBALISM_EXPERIMENT
  	{
   		// sample mass in tons. if undefined or 0, the experiment produce a file
    	SampleMass = #$@KERBALISM_CREW_EXPERIMENTS/RP0-StationScience1/SampleMass$
	    // Body restrictions, multiple lines allowed (just dont use confictiong combinations).
	    BodyAllowed = HomeBody
		IncludeExperiment = #$@KERBALISM_CREW_EXPERIMENTS/RP0-StationScience1/IncludeExperiment$
 	}
}

// delete the tag
@PART[*]:HAS[#stationTier[Early]]:LAST[RP-0-Kerbalism]
{
  !stationTier = delete
}
